# Check if lockfile is in sync with package.json files
echo "ğŸ” Checking lockfile consistency..."
if ! pnpm install --frozen-lockfile --silent; then
  echo "âŒ Lockfile is out of sync with package.json files"
  echo "ğŸ”„ Updating lockfile..."
  pnpm install
  echo "âœ… Lockfile updated"
  echo "âš ï¸  Please commit the updated pnpm-lock.yaml file"
  exit 1
fi
echo "âœ… Lockfile is in sync"

# Check environment variables
echo "ğŸ” Checking environment variables..."
if ! node scripts/check-env.js; then
  echo "âŒ Environment variables check failed"
  echo "ğŸ” Please set up your environment variables before committing"
  exit 1
fi
echo "âœ… Environment variables are properly configured"

# Verifying app is building
echo "ğŸ”§ Verifying app build..."
if ! pnpm build; then
  echo "âŒ Build failed"
  echo "ğŸ” Please check for build errors and fix them before committing"
  exit 1
fi
echo "âœ… Build verification passed"
